(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}})();const d=document.getElementById("navMenu"),m=document.getElementById("navBtn");m.addEventListener("click",()=>{d.classList.toggle("hidden")});document.addEventListener("click",e=>{!d.contains(e.target)&&!m.contains(e.target)&&d.classList.add("hidden")});const s=document.getElementById("input"),p=document.getElementById("errorMessage"),y=document.getElementById("shortenBtn"),u=document.getElementById("urlContainer");let a=[];const f="Shortly";document.addEventListener("DOMContentLoaded",()=>{g()});function h(){const e=localStorage.getItem(f);return e?JSON.parse(e):[]}function v(){localStorage.setItem(f,JSON.stringify(a))}function g(){a=h(),u.innerHTML="",a.forEach(e=>{const t=document.createElement("div");t.className="bg-white md:px-6 md:py-4 rounded-lg flex max-md:flex-col md:justify-between md:gap-12 md:items-center",t.innerHTML=`
      <p class="[overflow-wrap:anywhere] max-md:px-5 max-md:py-4 border-b-2 border-b-neutral-gray-600 md:border-0">
        ${e.originalUrl}
      </p>

      <div class="flex max-md:flex-col gap-3 md:gap-6 md:items-center max-md:px-5 max-md:py-4">
        <p class="text-primary-blue">
          ${e.shortUrl}
        </p>
        <button data-url="${e.shortUrl}" class="bg-primary-blue hover:bg-primary-blue-active duration-200 w-full md:w-24 p-2 text-white font-bold text-sm rounded-sm cursor-pointer">
          Copy
        </button>
      </div>
    `,u.appendChild(t)})}u.addEventListener("click",e=>{const t=e.target.closest("button");t&&(navigator.clipboard.writeText(t.dataset.url),t.classList.add("bg-primary-purple"),t.classList.remove("hover:bg-primary-blue-active"),t.innerText="Copied!",setTimeout(()=>{t.classList.remove("bg-primary-purple"),t.classList.add("hover:bg-primary-blue-active"),t.innerText="Copy"},1500))});y.addEventListener("click",async()=>{w();const e=s.value.trim();if(e==""){c("Please add a link");return}if(!L(e)){c("Please enter a valid link");return}let t=null;try{t=await b(e)}catch(o){console.error(o),c(o.message||"Something went wrong")}t&&(a.unshift({originalUrl:e,shortUrl:t}),s.value="",v(),g())});async function b(e){const o=await fetch("https://cleanuri.com/api/v1/shorten",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({url:e})});if(!o.ok)throw new Error(`Request failed: ${o.status}`);return(await o.json()).result_url}function L(e){try{return new URL(e),!0}catch{return!1}}function c(e){s.classList.add("error"),p.innerText=e}function w(){s.classList.remove("error"),p.innerText=""}
