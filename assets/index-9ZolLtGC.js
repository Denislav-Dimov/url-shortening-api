(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}})();const c=document.getElementById("navMenu"),m=document.getElementById("navBtn");m.addEventListener("click",()=>{c.classList.toggle("hidden")});document.addEventListener("click",t=>{!c.contains(t.target)&&!m.contains(t.target)&&c.classList.add("hidden")});const s=document.getElementById("input"),p=document.getElementById("errorMessage"),y=document.getElementById("shortenBtn"),d=document.getElementById("urlContainer");let a=[];const f="Shortly";document.addEventListener("DOMContentLoaded",()=>{g()});function h(){const t=localStorage.getItem(f);return t?JSON.parse(t):[]}function v(){localStorage.setItem(f,JSON.stringify(a))}function g(){a=h(),d.innerHTML="",a.forEach(t=>{const e=document.createElement("div");e.className="bg-white md:px-6 md:py-4 rounded-lg flex max-md:flex-col md:justify-between md:gap-12 md:items-center",e.innerHTML=`
      <p class="[overflow-wrap:anywhere] max-md:px-5 max-md:py-4 border-b-2 border-b-neutral-gray-600 md:border-0">
        ${t.originalUrl}
      </p>

      <div class="flex max-md:flex-col gap-3 md:gap-6 md:items-center max-md:px-5 max-md:py-4">
        <p class="text-primary-blue">
          ${t.shortUrl}
        </p>
        <button data-url="${t.shortUrl}" class="bg-primary-blue hover:bg-primary-blue-active duration-200 w-full md:w-24 p-2 text-white font-bold text-sm rounded-sm cursor-pointer">
          Copy
        </button>
      </div>
    `,d.appendChild(e)})}d.addEventListener("click",t=>{const e=t.target.closest("button");e&&(navigator.clipboard.writeText(e.dataset.url),e.classList.add("bg-primary-purple"),e.classList.remove("hover:bg-primary-blue-active"),e.innerText="Copied!",setTimeout(()=>{e.classList.remove("bg-primary-purple"),e.classList.add("hover:bg-primary-blue-active"),e.innerText="Copy"},1500))});y.addEventListener("click",async()=>{w();const t=s.value.trim();if(t==""){l("Please add a link");return}if(!L(t)){l("Please enter a valid link");return}let e=null;try{e=await b(t)}catch(o){console.error(o),l(o.message||"Something went wrong")}e&&(a.unshift({originalUrl:t,shortUrl:e}),s.value="",v(),g())});async function b(t){const e=await fetch("https://corsproxy.io/?"+encodeURIComponent("https://cleanuri.com/api/v1/shorten"),{method:"POST",body:new URLSearchParams({url:longUrl})});if(!e.ok)throw new Error(`Request failed: ${e.status}`);return(await e.json()).result_url}function L(t){try{return new URL(t),!0}catch{return!1}}function l(t){s.classList.add("error"),p.innerText=t}function w(){s.classList.remove("error"),p.innerText=""}
